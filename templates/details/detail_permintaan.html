{% extends '../index.html' %}
{% load static %}
{% load humanize %} 
{% load crispy_forms_tags %}

{% block url %}
<div class="d-flex justify-content-between m-auto">
	<div class="nav-item active">
		<a class="nav-link" href="{% url 'home' %}">Protofolio Desain</a>
	</div>
	<div class="nav-item">
		<a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" id="navbarDropdown" role="button">Data Produk</a>
		<ul class="dropdown-menu megamenu m-2 border border-light" style="max-width: 98%;">
			<div class="row">
				<div class="col-md-3">
					<ul>
						<h6 class="list-header">List Header</h6>
						<hr>
						<li>
							<a href="#">Lorem Ipsum</a>
						</li>
						<li>
							<a href="#">Lorem Ipsum</a>
						</li>
						<li>
							<a href="#">Lorem Ipsum</a>
						</li>
						<li>
							<a href="#">Lorem Ipsum</a>
						</li>
						<li>
							<a href="#">Lorem Ipsum</a>
						</li>
					</ul>
				</div>
				<div class="col-md-3">
					<ul>
						<h6 class="list-header">List Header</h6>
						<hr>
						<li>
							<a href="#">Lorem Ipsum</a>
						</li>
						<li>
							<a href="#">Lorem Ipsum</a>
						</li>
						<li>
							<a href="#">Lorem Ipsum</a>
						</li>
						<li>
							<a href="#">Lorem Ipsum</a>
						</li>
						<li>
							<a href="#">Lorem Ipsum</a>
						</li>
					</ul>
				</div>
			</div>
		</ul>
	</div>
	<div class="nav-item">
		<div class="dropdown">
			<a class="dropdown-toggle nav-link" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
			  Dropdown link
			</a>
		  
			<div class="dropdown-menu m-2 border border-light" aria-labelledby="dropdownMenuLink">
			  <a class="dropdown-item" href="#">Action</a>
			  <a class="dropdown-item" href="#">Another action</a>
			  <a class="dropdown-item" href="#">Something else here</a>
			</div>
		  </div>
		</ul>
	</div>
</div>
{% endblock %}

{% block content %}
<section class="mt-3 mb-3">
	<div class="container" style="max-width: 95%;">
		<div class="row">
			<div class="col-lg-8">
				<div class="col-lg-12 p-3 bg-white rounded shadow-sm">
					{{ object.id }}
					{{ object.oleh }}
					{{ object.nama_depan }}
					{{ object.nama_belakang }}
					{{ object.status }}
					
					{{ object.buat|date:'M d, Y' }}
						{% if object.status == 'Dalam Pengerjaan' %}
							{{ object.tanggal_pengerjaan|date:'M d,Y'}}
						{% elif object.status == 'Selesai' %}
							{{ object.tanggal_pengerjaan|date:'M d,Y'}}
							{{ object.tanggal_selesai|date:'M d,Y'}}
						{% endif %}
					
						{% if object.status == 'Dalam Pengerjaan' %}
							<!-- Button trigger modal -->
							<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#btnUbah" disabled>
								Ubah
							</button>
							
							<!-- Modal -->
							<div class="modal fade" id="btnUbah" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
								<div class="modal-dialog modal-dialog-centered" role="document"  style="max-width: 95%;">
								<div class="modal-content">
									<div class="modal-header">
									<h5 class="modal-title" id="exampleModalLongTitle">Modal title</h5>
									<button type="button" class="close" data-dismiss="modal" aria-label="Close">
										<span aria-hidden="true">&times;</span>
									</button>
									</div>
									<div class="modal-body">
										<div class="col-lg-12">
											<form action="" method="POST">
												{% csrf_token %}
												<div class="row">
													<div class="col-lg-6">
														{{ form.nama_depan|as_crispy_field }}
													</div>
													<div class="col-lg-6">
														{{ form.nama_belakang|as_crispy_field }}
													</div>
													<div class="col-lg-3">
														{{ form.email|as_crispy_field }}
													</div>
													<div class="col-lg-3">
														{{ form.kontak|as_crispy_field }}
													</div>
													<div class="col-lg-3">
														{{ form.jumlah_budget|as_crispy_field }}
													</div>
													<div class="col-lg-3">
														{{ form.services|as_crispy_field }}
													</div>
													<div class="col-lg-12 mt-5 mb-3">
														<h5 class="">Pastikan isi alamat anda dengan benar</h5>
													</div>
													<div class="col-lg-4">
														{{ form.alamat|as_crispy_field }}
													</div>
													<div class="col-lg-4">
														{{ form.kota|as_crispy_field }}
													</div>
													<div class="col-lg-4">
														{{ form.provinsi|as_crispy_field }}
													</div><br>
													<div class="col-lg-12">
														{{ form.deskripsi|as_crispy_field }}
													</div>
													<div class="col-lg-6">
														{{ form.link|as_crispy_field }}
														<small class="text-secondary mt-0">Cantumkan link dokumen deskripsi jika perlu**</small>
													</div>
													<div class="col-lg-6">
														{{ form.jenis_ruangan|as_crispy_field }}
													</div><br>
													<div class="col-lg-3 mt-4">
														{% if user.is_authenticated %}
														<input class="btn btn-outline-info btn-block" type="submit" name="Kirim" id="" value="Kirim">
														{% else %}
														<input class="btn btn-outline-info btn-block" type="submit" name="Kirim" id="" value="Kirim" disabled>
														<small class="text-secondary">Anda harus login terlebih <dahulu></dahulu></small>
														{% endif %}
													</div>
												</div>
											</form>
										</div>
									</div>
									<div class="modal-footer">
									<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
									<button type="button" class="btn btn-primary">Save changes</button>
									</div>
								</div>
							</div>
							</div>
						{% elif object.status == 'Selesai' %}
							<p>kembali</p>
						{% else %}
							<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#btnUbah">
								Ubah
							</button>
							
							<!-- Modal -->
							<div class="modal fade" id="btnUbah" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
								<div class="modal-dialog modal-dialog-centered" role="document"  style="max-width: 95%;">
								<div class="modal-content">
									<div class="modal-header">
									<h5 class="modal-title" id="exampleModalLongTitle">Modal title</h5>
									<button type="button" class="close" data-dismiss="modal" aria-label="Close">
										<span aria-hidden="true">&times;</span>
									</button>
									</div>
									<div class="modal-body">
										<div class="col-lg-12">
											<form action="" method="POST">
												{% csrf_token %}
												<div class="row">
													<div class="col-lg-6">
														{{ form.nama_depan|as_crispy_field }}
													</div>
													<div class="col-lg-6">
														{{ form.nama_belakang|as_crispy_field }}
													</div>
													<div class="col-lg-3">
														{{ form.email|as_crispy_field }}
													</div>
													<div class="col-lg-3">
														{{ form.kontak|as_crispy_field }}
													</div>
													<div class="col-lg-3">
														{{ form.jumlah_budget|as_crispy_field }}
													</div>
													<div class="col-lg-3">
														{{ form.services|as_crispy_field }}
													</div>
													<div class="col-lg-12 mt-5 mb-3">
														<h5 class="">Pastikan isi alamat anda dengan benar</h5>
													</div>
													<div class="col-lg-4">
														{{ form.alamat|as_crispy_field }}
													</div>
													<div class="col-lg-4">
														{{ form.kota|as_crispy_field }}
													</div>
													<div class="col-lg-4">
														{{ form.provinsi|as_crispy_field }}
													</div><br>
													<div class="col-lg-12">
														{{ form.deskripsi|as_crispy_field }}
													</div>
													<div class="col-lg-6">
														{{ form.link|as_crispy_field }}
														<small class="text-secondary mt-0">Cantumkan link dokumen deskripsi jika perlu**</small>
													</div>
													<div class="col-lg-6">
														{{ form.jenis_ruangan|as_crispy_field }}
													</div><br>
													<div class="col-lg-3 mt-4">
														{% if user.is_authenticated %}
														<input class="btn btn-outline-info btn-block" type="submit" name="Kirim" id="" value="Kirim">
														{% else %}
														<input class="btn btn-outline-info btn-block" type="submit" name="Kirim" id="" value="Kirim" disabled>
														<small class="text-secondary">Anda harus login terlebih <dahulu></dahulu></small>
														{% endif %}
													</div>
												</div>
											</form>
										</div>
									</div>
									<div class="modal-footer">
									<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
									<button type="button" class="btn btn-primary">Save changes</button>
									</div>
								</div>
							</div>
							</div>
						{% endif %}
				</div>
			</div>
			<div class="col-lg-4 ">
				<div class="sticky shadow-sm rounded p-4 bg-white">
					<nav class="nav-one navbar navbar-expand-sm navbar-white d-flex justify-content-between m-auto p-0">
						<div class="nav-item ">
							<p class="font-weight-bold" style="font-size: large;">
								Estimasi Biaya
							</p>
						</div>
						<div class="nav-item">
							<p class="font-weight-normal" style="font-size: larger;">
								IDR {{ object.jumlah_budget|intcomma }}
							</p>
						</div>
					</nav><br><br>
					<div class="nav-item">
						<p class="font-weight-normal" style="font-size: small;">
							{{ object.deskripsi_singkat }}
						</p>
					</div>
					<div class="nav-item">
						<p class="font-weight-bold text-secondary" style="font-size: small;">
							Pengerjaan <span class="text-dark">{{ object.waktu_pengerjaan }} hari <br></span>
							Banyak Revisi <span class="text-dark">{{ object.banyak_revisi}}</span>
						</p>
					</div>
				</div>
			</div>
        </div>
    </div>
</section>
{% endblock %}