{% extends '../index.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block url %}
<div class="d-flex justify-content-between m-auto">
	<div class="nav-item active">
		<a class="nav-link" href="{% url 'home' %}">Protofolio Desain</a>
	</div>
	<div class="nav-item">
		<a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" id="navbarDropdown" role="button">Data Produk</a>
		<ul class="dropdown-menu megamenu m-2 border border-light" style="max-width: 98%;">
			<div class="row">
				<div class="col-md-3">
					<ul>
						<h6 class="list-header">List Header</h6>
						<hr>
						<li>
							<a href="#">Lorem Ipsum</a>
						</li>
						<li>
							<a href="#">Lorem Ipsum</a>
						</li>
						<li>
							<a href="#">Lorem Ipsum</a>
						</li>
						<li>
							<a href="#">Lorem Ipsum</a>
						</li>
						<li>
							<a href="#">Lorem Ipsum</a>
						</li>
					</ul>
				</div>
				<div class="col-md-3">
					<ul>
						<h6 class="list-header">List Header</h6>
						<hr>
						<li>
							<a href="#">Lorem Ipsum</a>
						</li>
						<li>
							<a href="#">Lorem Ipsum</a>
						</li>
						<li>
							<a href="#">Lorem Ipsum</a>
						</li>
						<li>
							<a href="#">Lorem Ipsum</a>
						</li>
						<li>
							<a href="#">Lorem Ipsum</a>
						</li>
					</ul>
				</div>
			</div>
		</ul>
	</div>
	<div class="nav-item">
		<div class="dropdown">
			<a class="dropdown-toggle nav-link" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
			  Dropdown link
			</a>
		  
			<div class="dropdown-menu m-2 border border-light" aria-labelledby="dropdownMenuLink">
			  <a class="dropdown-item" href="#">Action</a>
			  <a class="dropdown-item" href="#">Another action</a>
			  <a class="dropdown-item" href="#">Something else here</a>
			</div>
		  </div>
		</ul>
	</div>
</div>
{% endblock %}

{% block content %}
<!-- start banner Area -->
<section class="banner-area section_gap banner_gap">
	<div class="container" style="max-width: 95%;">
		<div class="row">
			<div class="col-lg-4 mt-3">
				<div class="col-lg-12 bg-white rounded shadow-sm p-3">
					<div class="col-lg-12 d-flex justify-content-center ">
						<img src="{{ user.profile.image.url }}" class="border" style="border-radius: 50%; width: 200px; height: 200px; object-fit: cover;"> 
					</div>
					<div class="col-lg-12 d-flex justify-content-center mt-3">
						<h4>{{ user.username }}</h4>
					</div>
					{% if user.profile.deskripsi  %}
					<div class="col-lg-12 d-flex justify-content-center text-justify mt-0 ">
						<p>{{ user.profile.deskripsi }}</p><span></span>
					</div>
					{% else %}
					<div class="col-lg-12 d-flex justify-content-center text-justify mt-0">
						<p>Belum ada deskripsi</p><span></span>
					</div>
					{% endif %}
					<div class="col-lg-12 mt-0">
						<span class="d-flex justify-content-center">
							<button type="button" class="btn btn-primary btn-block ml-2 mr-2" data-toggle="modal" data-target="#exampleModal">
								Edit Profile
							</button>
						</span>
						<div class="row">
							<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
								<div class="modal-dialog modal-dialog-centered" role="document" style="max-width: 95%;">
									<div class="modal-content">
										<div class="modal-header">
											<div class="col-lg-11 mb-0">
												<h3 class="">Profile Anda</h3>
											</div>
											<div class="col-lg-1">
												<button type="button" class="close" data-dismiss="modal" aria-label="Close">
													<span aria-hidden="true">&times;</span>
												</button>
											</div>
											<hr>
										</div>
										<div class="modal-body">
											<div class="col-lg-12">
												<form method="POST" enctype="multipart/form-data">
													{% csrf_token %}
													{{ u_form|crispy }}
													{{ p_form|crispy }}
													<div class="modal-footer">
														<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
														<button class="btn btn-primary" type="submit">Update</button>
													</div>
												 </form>
											</div>
										</div>
									</div>
								</div>
							</div>      
						</div>
					</div>
				</div>
			</div>
			<div class="col-lg-8 mt-3">
				<div class="col-lg-12 bg-white rounded shadow-sm p-3">
					<h3 class="ml-1 roboto">Terkini</h3>
					<hr>
					<div class="ml-2 mr-2">
						<div class="row">
							<div class="col-lg-12">
								<ul class="nav nav-tabs" id="myTab" role="tablist">
									<li class="nav-item">
										<a class="nav-link active" id="home-tab" data-toggle="tab" href="#semua" role="tab" aria-controls="home" aria-selected="true">Semua</a>
									</li>
									<li class="nav-item">
										<a class="nav-link" id="profile-tab" data-toggle="tab" href="#antrian" role="tab" aria-controls="profile" aria-selected="false">Dalam Antrian</a>
									</li>
									<li class="nav-item">
										<a class="nav-link" id="contact-tab" data-toggle="tab" href="#pengerjaan" role="tab" aria-controls="contact" aria-selected="false">Dalam Pengerjaan</a>
									</li>
									<li class="nav-item">
										<a class="nav-link" id="contact-tab" data-toggle="tab" href="#selesai" role="tab" aria-controls="contact" aria-selected="false">Selesai</a>
								  </li>
								</ul>
								<div class="tab-content" id="myTabContent">
									<div class="tab-pane fade show active" id="semua" role="tabpanel" aria-labelledby="home-tab">
										{% for post in posts %}
											<div class="card mb-3" style="max-width: 100%; width: 100%;">
												<div class="card-body">
													{% if post.status == 'Dalam Pengerjaan' %}
													<div class="progress mb-2" style="height: 3px;">
														<div class="progress-bar" role="progressbar" style="width: 50%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
													</div>
													{% elif post.status == 'Selesai' %}
													<div class="progress mb-2" style="height: 3px;">
														<div class="progress-bar bg-success" role="progressbar" style="width: 100%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
													</div>
													{% else %}
													<div class="progress mb-2" style="height: 3px;">
														<div class="progress-bar bg-danger" role="progressbar" style="width: 1%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
													</div>
													{% endif %}
													<div class="media">
														{% if post.status == 'Dalam Pengerjaan' %}
														<img class="align-self-center mr-3" src="{% static 'image/work.png' %}" alt="{{ user.username }}">
														{% elif post.status == 'Selesai' %}
														<img class="align-self-center mr-3" src="{% static 'image/selesai.png' %}" alt="{{ user.username }}">
														{% else %}
														<img class="align-self-center mr-3" src="{% static 'image/queue.png' %}" alt="{{ user.username }}">
														{% endif %}
														<div class="media-body">
															<small class="font-weight-normal">
																<span class="text-right">No.ID {{ post.id }}</span>
															</small><br>
															<small class="m-0 font-weight-bold text-dark text-capitalize">
																{{ post.nama_depan }} {{ post.nama_belakang }} 
																<a href="{% url 'detail-permintaan' post.id %}" class="badge badge-primary">
																	Selengkapnya
																</a>
																<br>
																<span class="font-weight-normal">
																	{{ post.buat|date:'M d, Y'}} | 
																	{% if post.status == 'Dalam Pengerjaan' %}
																	<span class="font-weight-bold text-primary">
																		{{ post.status }}
																	</span>
																	{% elif post.status == 'Selesai' %}
																	<span class="font-weight-bold text-success">
																		{{ post.status }}
																	</span>
																	{% else %}
																	<span class="font-weight-bold text-warning">
																		{{ post.status }}
																	</span>
																	{% endif %}
																</span>
															</small>
														</div>
													</div>
												</div>
											</div>
										{% endfor %}
									</div>
									<div class="tab-pane fade" id="antrian" role="tabpanel" aria-labelledby="profile-tab">
										{% for post in posts %}
											{% if post.status != 'Dalam Pengerjaan' and post.status != 'Selesai' %}
											<div class="card mb-3" style="max-width: 100%; width: 100%;">
												<div class="card-body">
													<div class="progress mb-2" style="height: 3px;">
														<div class="progress-bar bg-danger" role="progressbar" style="width: 1%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
													</div>
													<div class="media">
														<img class="align-self-center mr-3" src="{% static 'image/queue.png' %}" alt="{{ user.username }}">
														<div class="media-body">
															<small class="font-weight-normal">
																<span class="text-right">No.ID {{ post.id }}</span>
															</small><br>
															<small class="m-0 font-weight-bold text-dark text-capitalize">
																{{ post.nama_depan }} {{ post.nama_belakang }} <a href="{% url 'detail-permintaan' post.id %}" class="badge badge-primary">Selengkapnya</a><br>
																<span class="font-weight-normal">
																	{{ post.buat|date:'M d, Y'}} | 
																	{% if post.status == 'Dalam Pengerjaan' %}
																	<span class="font-weight-bold text-primary">
																		{{ post.status }}
																	</span>
																	{% elif post.status == 'Selesai' %}
																	<span class="font-weight-bold text-success">
																		{{ post.status }}
																	</span>
																	{% else %}
																	<span class="font-weight-bold text-warning">
																		{{ post.status }}
																	</span>
																	{% endif %}
																</span>
															</small>
														</div>
													</div>
												</div>
											</div>
											{% endif %}
										{% endfor %}
									</div>
									<div class="tab-pane fade" id="pengerjaan" role="tabpanel" aria-labelledby="contact-tab">
										{% for post in posts %}
											{% if post.status == 'Dalam Pengerjaan' %}
											<div class="card mb-3" style="max-width: 100%; width: 100%;">
												<div class="card-body">
													<div class="progress mb-2" style="height: 3px;">
														<div class="progress-bar" role="progressbar" style="width: 50%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
													</div>
													<div class="media">
														<img class="align-self-center mr-3" src="{% static 'image/work.png' %}" alt="{{ user.username }}">
														<div class="media-body">
															<small class="font-weight-normal">
																<span class="text-right">No.ID {{ post.id }}</span>
															</small><br>
															<small class="m-0 font-weight-bold text-dark text-capitalize">
																{{ post.nama_depan }} {{ post.nama_belakang }} <a href="{% url 'detail-permintaan' post.id %}" class="badge badge-primary">Selengkapnya</a><br>
																<span class="font-weight-normal">
																	{{ post.buat|date:'M d, Y'}} | 
																	{% if post.status == 'Dalam Pengerjaan' %}
																	<span class="font-weight-bold text-primary">
																		{{ post.status }}
																	</span>
																	{% elif post.status == 'Selesai' %}
																	<span class="font-weight-bold text-success">
																		{{ post.status }}
																	</span>
																	{% else %}
																	<span class="font-weight-bold text-warning">
																		{{ post.status }}
																	</span>
																	{% endif %}
																</span>
															</small>
														</div>
													</div>
												</div>
											</div>
											{% endif %}
										{% endfor %}
									</div>
									<div class="tab-pane fade" id="selesai" role="tabpanel" aria-labelledby="contact-tab">
										{% for post in posts %}
											{% if post.status == 'Selesai' %}
											<div class="card mb-3" style="max-width: 100%; width: 100%;">
												<div class="card-body">
													<div class="progress mb-2" style="height: 3px;">
														<div class="progress-bar bg-success" role="progressbar" style="width: 100%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
													</div>
													<div class="media">
														<img class="align-self-center mr-3" src="{% static 'image/selesai.png' %}" alt="{{ user.username }}">
														<div class="media-body">
															<small class="font-weight-normal">
																<span class="text-right">No.ID {{ post.id }}</span>
															</small><br>
															<small class="m-0 font-weight-bold text-dark text-capitalize">
																{{ post.nama_depan }} {{ post.nama_belakang }} <a href="{% url 'detail-permintaan' post.id %}" class="badge badge-primary">Selengkapnya</a><br>
																<span class="font-weight-normal">
																	{{ post.buat|date:'M d, Y'}} | 
																	{% if post.status == 'Dalam Pengerjaan' %}
																	<span class="font-weight-bold text-primary">
																		{{ post.status }}
																	</span>
																	{% elif post.status == 'Selesai' %}
																	<span class="font-weight-bold text-success">
																		{{ post.status }}
																	</span>
																	{% else %}
																	<span class="font-weight-bold text-warning">
																		{{ post.status }}
																	</span>
																	{% endif %}
																</span>
															</small>
														</div>
													</div>
												</div>
											</div>
											{% endif %}
										{% endfor %}
									</div>
								</div>					
							</div>		
						</div>
					</div>
				</div>
			</div>
		</div>            
	</div>
</section>
<!-- End banner Area -->
{%endblock %}